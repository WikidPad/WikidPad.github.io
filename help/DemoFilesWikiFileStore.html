<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>DemoFilesWikiFileStore</title>
        <link type="text/css" rel="stylesheet" href="appbase.css">
    </head>
    <body>
<span class="parent-nodes">parent nodes: <span class="parent-node"><a href="DemoExternalLinks.html">DemoExternalLinks</a></span> | <span class="parent-node"><a href="DemoFilesWikiFileStoreIp.html">DemoFilesWikiFileStoreIp</a></span></span><br /><br />
<a name=".h0"></a><h2>Demo Files Wiki File Store</h2>
Contents:   <div class="page-toc">
<div class="page-toc-level2"><a href="#.h0">Demo Files Wiki File Store</a></div>
<div class="page-toc-level3"><a href="#.h55">General</a></div>
<div class="page-toc-level3"><a href="#.h136">Copy control</a></div>
<div class="page-toc-level3"><a href="#.h2859">Manual control</a></div>
<div class="page-toc-level3"><a href="#.h3807">HTML export</a></div>
<div class="page-toc-level3"><a href="#.h4894">Remarks</a></div>
<div class="page-toc-level3"><a href="#.h5280">Todo</a></div>
<div class="page-toc-level3"><a href="#.h5781">Results</a></div>
</div>
<hr size="1" />
<a name=".h55"></a><h3>General</h3>
Each wiki can have a "file store", where you can collect all the images, documents and other files, that are related to the wiki in one place. The wiki file store is formed by the "files" folder in the wiki's directory. Wikidpad offers some special facilities, to help maintain the file store, with respect to relative links and export to html.<br />
<br />
Files can of course be copied into the file store by hand; if the "files" folder does not yet exist, you have to create it first. Files can however also be copied, by dragging one or more of them from Windows Explorer onto the editor, while holding down the control key. The files are then copied to the file store and relative links to them are created in the editor. If a file with the same identity already exists in the store, only the link is created and no copying is performed. If a file with the same name, but a different identity already exists, a random sequence of 10 digits is appended to the file name, in order to make it unique. If the "files" folder does not yet exist, Wikidpad will create it.<br />
<br />
For more information on how Wikidpad compares files and how you that can be influenced, see <span class="wiki-link"><a href="#CopyControl">Wiki File Store: Copy control</a></span><br />
<br />
<a href="#">Top</a><hr size="1" />
<a name="CopyControl"></a><a name=".h136"></a><h3>Copy control</h3>
When copying a file to the file store, Wikidpad checks the store for one or more files with the same identity. These do not specifically have to be files with the same name! Files with different names, can still be (copies of) exactly the same image or document. For files to be seen as identical, they must have:<br />
<ol><li />The same size<li />The same suffix (or extention = the part of the filename from the last dot to the end of the name)<br />
</ol>
During identity control, all the files that fullfill these conditions, are put on the shortlist of possibly identical files. The size of the shortlist can be influenced, using the following two options:<a href="#.f1">[1]</a><br />
<ol><li />Modified date must match<br />
- Only files with the exact same modification date are accepted for the shortlist. This option speeds up the identity check, but may lead to unnecessary copies of the same file in the store.<li />File name must match<br />
- Only files with the exact same name are accepted for the shortlist. This option is not extremely useful, but can have it's use.<br />
</ol>
Furthermore, the comparison process can be influenced with the option:<a href="#.f1">[1]</a><ol><li />Modified date is enough<br />
</ol>
After the shortlist is completed, it is compared against the file to be copied in the following sequence:<br />
<ol><li />If the list contains a file with the exact same name, this file is condsidered to be the same file.<li />If modified date is enough = true<br />
<ol><li />If the list contains one (1) file with the exact same modification date, this file is considered to be the same file.<br />
</ol>
<ol><li />If the list contains more of those files, then the (first) file with the same content is considered to be the same file.<br />
</ol>
<ol><li />If there is no such file or no file has the same content, then the process continues with bullet 4.<br />
</ol>
<li />Modified date is enough = false<br />
<ol><li />If there are files in the list, that have the same modification date, then the (first) file with the same content is considered to be the same file.<br />
</ol>
<ol><li />If there is no such file or no file has the same content, then the process continues with bullet 4.<br />
</ol>
<li />The (first) file with the same content,  is considered to be the same file.<li />If there is no such file, then there is no file in the store, that is the same.<br />
</ol>
<b>Important!</b><ul><li />In (a) certain stage(s) of the decision proces, file are compaired byte by byte with the file-to-be-copied. This may be a lengthy process, depending the options set, the number of files in the shortlist and/or in the store and on their size.<li />During copy control Wikidpad does not respond to any key presses or mouse clicks.<br />
</ul>
<a href="#">Top</a><br />
<a name=".f1"></a>[1] <i>These options can be set in "menu / wiki / options / page: current wiki</i><hr size="1" />
<a name=".h2859"></a><h3>Manual control</h3>
Other directories than "files" and "data" can be created in a wiki's directory and files in them can be referenced using relative links, but only the "files" directory is managed by the file store mechanism.<br />
<br />
The file store has no special status, as far as the operating system is concerned. Files and folders can be copied, moved and deleted to and from the folder manually, as usual. This should however be avoided at moments, when Wikidpad is performing copy control activities on the file store.<br />
<br />
The file store "copy" can't copy or create subdirectories into the file store; you can do that manually. Copy control however will not search these subdirectories for identical files.<br />
<br />
Wikidpad never deletes a file in the store; not even when there is no reference to it anymore in any of the pages of the wiki. As far as this type of "housekeeping" is necessary for the file store, it has to be done manually.<br />
<br />
<a href="#">Top</a><hr size="1" />
<a name=".h3807"></a><h3>HTML export</h3>
When exporting pages to html, all the files in the file store, that are referenced in those pages and use a rel scheme for the link (i.e. relative link of relative path) are copied into a "files" subfolder of the export target folder. Doing this, Wikidpad will respect any folderstructure, that might have been created in the "files" folder and that contain files, that are referenced by the exported pages. So a referenced file:<ul><li />rel://files/images/w3schools.png</ul>
will be copied to:<ul><li />.../htmltarget/files/images/w3schools.png<br />
</ul>
Files that are in the file store, but are referenced using absolute links, will not be copied to the target folder's file store. Files that are referenced with relative links, but are in a wiki subfolder different from the file store, are also n√≥t copied to the export target. And of course files that are in folders outside the wiki folder, are not copied either. As far as any of these files is referenced using a relative liks, it's the user's responsibility, to copy these files to their correct target folders.<br />
<br />
<a href="#">Top</a><hr size="1" />
<a name=".h4894"></a><h3>Remarks</h3>
<ul><li />The three copy control options in the options dialog are incorrectly not mutually exclusive!<li />The text does not mention, whether the check for modification date includes the modification time<li />The text is not clear enough about the control sequence: bullet 2. What happens when there are more then one files with the same modification date.<br />
</ul>
<a href="#">Top</a><hr size="1" />
<a name=".h5280"></a><h3>Todo</h3>
<span class="todo">todo.demo.projectdemo.demo1: check out all posibilities</span><br />
<span class="todo">todo.demo.projectdemo.demo1: check correctness of text</span><br />
<br />
<span class="todo">action.demo.development: check out copy control options not being mutually exclusive.</span><br />
Is this by design or overlooked? How does wikidpad respond, when more then 1 option is checked?<br />
<span class="todo">question.demo.development: does modification date include modidication time?</span><br />
<span class="todo">question.demo.development: is the sequence of copy control correct: bullet 2?</span><br />
see remarks; third bullet<br />
<br />
<a href="#">Top</a><hr size="1" />
<a name=".h5781"></a><h3>Results</h3>
<span class="todo">issue.demo.new: copy control options not mutually exclusive</span><br />
<br />
<span class="property">[demo.status.waiting: issues]</span><br />
<a href="#">Top</a><hr size="1" />
previous: <a href="javascript:history.go(-1)">Back</a><br />
parents:&nbsp; <span class="wiki-link"><a href="DemoExternalLinks.html">DemoExternalLinks</a></span>, <span class="wiki-link"><a href="DemoFilesWikiFileStoreIp.html">DemoFilesWikiFileStoreIp</a></span><br />
inserts:&nbsp;&nbsp; <span class="wiki-link"><a href="DemoFilesWikiFileStoreIp.html">DemoFilesWikiFileStoreIp</a></span><br />
attributes: <span class="property">[tree_position: 2]</span>, <span class="property">[template: DemoSubjectTemplate]</span>, <span class="property">[camelCaseWordsEnabled: false]</span>    </body>
</html>
